# =============================================================================
# BESIKTNINGSAPP - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to version control!

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
FLASK_APP=app.main:create_app
FLASK_ENV=development
DEBUG=true
SECRET_KEY=change-me-in-production-use-secrets-manager

# API Configuration
API_VERSION=v1
API_BASE_PATH=/api/v1

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://besiktning:besiktning@localhost:5432/besiktningsapp
# For SQLAlchemy 2.x compatibility
SQLALCHEMY_DATABASE_URI=postgresql://besiktning:besiktning@localhost:5432/besiktningsapp
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# -----------------------------------------------------------------------------
# AUTHENTICATION
# -----------------------------------------------------------------------------
JWT_SECRET_KEY=change-me-in-production-use-secrets-manager
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=2592000
JWT_ALGORITHM=HS256

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
# Storage backend: 'local' for development, 's3' for production
STORAGE_BACKEND=local

# Local storage (development)
LOCAL_STORAGE_PATH=/app/storage
LOCAL_STORAGE_IMAGES_PATH=/app/storage/images
LOCAL_STORAGE_PDFS_PATH=/app/storage/pdfs

# S3/MinIO storage (production)
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_BUCKET_NAME=besiktningsapp
S3_REGION=us-east-1
S3_USE_SSL=false
S3_PRESIGNED_URL_EXPIRATION=3600

# Maximum file sizes (bytes)
MAX_IMAGE_SIZE=10485760
MAX_PDF_SIZE=52428800

# Allowed file types
ALLOWED_IMAGE_EXTENSIONS=jpg,jpeg,png,webp
ALLOWED_IMAGE_MIMETYPES=image/jpeg,image/png,image/webp

# -----------------------------------------------------------------------------
# PDF GENERATION
# -----------------------------------------------------------------------------
PDF_ENGINE=reportlab
PDF_DPI=300
PDF_PAGE_SIZE=A4
PDF_MARGIN_TOP=2.0
PDF_MARGIN_BOTTOM=2.0
PDF_MARGIN_LEFT=2.0
PDF_MARGIN_RIGHT=2.0

# -----------------------------------------------------------------------------
# SYNC CONFIGURATION
# -----------------------------------------------------------------------------
SYNC_CONFLICT_POLICY_DEFAULT=LWW
SYNC_MIN_CLIENT_VERSION=1.0.0
SYNC_IDEMPOTENCY_TTL=86400
SYNC_MAX_BATCH_SIZE=100

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100/hour
RATE_LIMIT_STORAGE_URL=redis://redis:6379/0

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/besiktningsapp/app.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# HEALTH CHECKS
# -----------------------------------------------------------------------------
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_STORAGE=true
HEALTH_CHECK_REDIS=false

# -----------------------------------------------------------------------------
# CORS (for development)
# -----------------------------------------------------------------------------
CORS_ENABLED=true
CORS_ORIGINS=http://localhost:3000,http://localhost:19000,http://localhost:19006
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# MONITORING & TRACING
# -----------------------------------------------------------------------------
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# -----------------------------------------------------------------------------
# WORKER CONFIGURATION (if using Celery/RQ)
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# -----------------------------------------------------------------------------
# TIMEZONE & LOCALE
# -----------------------------------------------------------------------------
TZ=Europe/Stockholm
LOCALE=sv_SE.UTF-8
