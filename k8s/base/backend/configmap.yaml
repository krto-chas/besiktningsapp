apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
  namespace: besiktningsapp
  labels:
    app.kubernetes.io/name: backend
    app.kubernetes.io/part-of: besiktningsapp
data:
  FLASK_ENV: "production"
  FLASK_DEBUG: "false"
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"

  # Database (non-secret parts)
  DB_POOL_SIZE: "5"
  DB_MAX_OVERFLOW: "10"
  DB_POOL_TIMEOUT: "30"

  # Storage
  STORAGE_BACKEND: "s3"
  S3_ENDPOINT_URL: "http://minio:9000"
  S3_BUCKET_NAME: "besiktningsapp"
  S3_REGION: "us-east-1"
  USE_SSL: "false"

  # CORS
  CORS_ORIGINS: "*"

  # Rate limiting
  RATELIMIT_ENABLED: "true"
  RATELIMIT_DEFAULT: "200 per day;50 per hour"
  REDIS_URL: "redis://redis:6379/0"

  # JWT
  JWT_ACCESS_TOKEN_EXPIRES: "3600"
  JWT_REFRESH_TOKEN_EXPIRES: "2592000"

  # Timezone
  TZ: "Europe/Stockholm"

  # File limits
  MAX_IMAGE_SIZE_BYTES: "10485760"
  MAX_PDF_SIZE_BYTES: "52428800"

  # PDF
  PDF_DPI: "150"
  PDF_PAGE_SIZE: "A4"

  # Sync
  SYNC_CONFLICT_POLICY: "LWW"
  SYNC_MAX_OPS_PER_PUSH: "500"
